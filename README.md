# <span style="color: #2980b9">Post UI</span>

## <span style="color: #3498db">226.Node Package Manager -> npm vs yarn</span>
    |                                   | npm                      | yarn                    |
    | :-------------------------------- | :----------------------- | :---------------------- |
    | Install global (can use anywhere) | npm i -g package         | yarn global add package |
    | Install packages (package.json)   | npm i                    | yarn                    |
    | Add new package for prod          | npm i package            | yarn add package        |
    | Add new package for dev           | npm i --save-dev package | yarn add --dev package  |
    | Remove package                    | npm uninstall package    | yarn remove package     |
    | Update package                    | npm update package       | yarn update package     |
    | Audit                             | npm audit                | yarn audit              |
    | Fix Audit Issues                  | npm audit fix            | N/A                     |

     |                  | npm           | yarn       |
     | :--------------- | :------------ | :--------- |
     | dev              | npm run dev   | yarn dev   |
     | build            | npm run build | yarn build |
     | start            | npm start     | yarn start |
     | test             | npm test      | yarn test  |
     | list all scripts | npm run       | yarn run   |

## <span style="color: #3498db">227.Module Bundler</span>
    > Sự khác nhau trong hoạt động của Webpack và  Vite

## <span style="color: #3498db">228.Setup vanilla js project using ViteJS</span>
  ```javascript
  # npm 6.x
    npm init vite@latest js-post-ui --template vanilla

  # npm 7+, extra double-dash is needed:
    npm init vite@latest js-post-ui -- --template vanilla

  # yarn
  yarn create vite js-post-ui --template vanilla
  ```

  ```javascript
  root
|__ dist       # output folder when running build
|__ images     # all images should be here
|__ js         # js files
| |__ api
| |__ constants
| |__ utils
| |__ ...
|
|__ node_modules    # all deps used by our project
|__ public          # files to be copied to dist folder
|__ styles          # css files
|__ index.html      # home page
|__ package.json    # package info
|__ vite.config.js  # custom config of vitejs
|__ yarn.lock       # generated by yarn

  ```

## <span style="color: #3498db">229.Config multi-page for ViteJS</span>
- Create `vite.config.js` with
  
  ```javascript
    // vite.config.js
    const { resolve } = require('path')
    const { defineConfig } = require('vite')
    module.exports = defineConfig({
      build: {
      rollupOptions: {
      input: {
        main: resolve(__dirname, 'index.html'),
        postDetail: resolve(__dirname, 'post-detail.html'),
        addEditPost: resolve(__dirname, 'add-edit-post.html'),
            }, 
          },
        }, 
      })
  ``` 

## <span style="color: #3498db">230.Public folder and CDN cache</span>
[What is a CDN](https://www.imperva.com/learn/performance/what-is-cdn-how-it-works/)

```javascript
root
|__ dist
|__ public # all files will be copied over to dist folder 
| |__ robots.txt
| |__ favicon.ico
| |__ sitemap.xml
```

## <span style="color: #3498db">231.Setup Git and deloy to Vercel</span>
  > Setup Git for global project  
  > ```git config --global user.name "your_name_here"```  
  >```git config --global user.email your_email@gmail.com```

  > Setup Git for local project  
  > ```git config user.name "your_name_here"```  
  >```git config user.email your_email@gmail.com```


## <span style="color: #3498db">232.Setup UI template</span>
```javascript
# clone base ui
git clone https://github.com/paulnguyen-mn/post-ui-base
```
- Copy HTML : index.html add-edit-post.html post-detail.html
- Copy CSS : all files in css to styles
- Copy Images : all files in images

## <span style="color: #3498db">233.Add Carousel section</span>
- `git stash`
- `git pull`
- `git checkout -b feature/add-carousel`
- `git stash pop`
- `git add .`
- `git commit -m "Commit Message"`
- `git push origin ...`
- `git checkout main`
- `git pull`

[Lorem Picsum](https://picsum.photos/)

## <span style="color: #3498db">234.API Module Overview</span>
```javascript
root
|__ js
|  |__ api
|      |__ axiosClient.js # or fetchClient.js
|      |__ studentApi.js
|      |__ postApi.js
|      |__ `[resource]`Api.js
|
|__ index.html
```

## <span style="color: #3498db">235.Setup axiosClient</span>
- Tạo axiosClient
- Demo gọi API từ axios.default và axiosClient

## <span style="color: #3498db">236.Setup API file</span>
- Tạo postApi.js định nghĩa các phương thức của API
- postApi.js này sẽ dùng base có trong file axiosClient.js
- Gọi API từ sử dụng postApi.js ở trên

## <span style="color: #3498db">237.Per-request config</span>
- Tuỳ chỉnh mỗi request bằng cách thêm config bên trong file postApi.js

## <span style="color: #3498db">238.Interceptors</span>
- Là những hàm xử lý một số thứ khi gửi request hoặc nhận response

## <span style="color: #3498db">239.Handle API errors</span>
- Chỗ nào gọi API chỗ đó phải thực hiện `try…cat` → nếu không nó sẽ dừng lại tại chỗ bị lỗi cho dù đằng sau còn nhiều call api khác
- Xử lý error cho từng request bằng `try…cat` trong `main.js` (file gọi API)
- Xử lý common error bên trong file `axiosClient.js`
- Thứ tự bắt lỗi và handle như sau
    - `axiosClient.js` > `postApi.js` > `main.js`

## <span style="color: #3498db">240.Tree Shaking</span>
- Tree Shaking : loại bỏ function không dùng đến khi tiến hành bundle ra product
- Có 2 kiểu export và import đó là : `default` và `name`
- Default :
    - Khi import sẽ tường minh dễ hiểu hàm ở đâu và dùng để làm gì
    - Tuy nhiên khi bundle sẽ kéo toàn bộ function bên trong export default vào code product gây dư thừa code không cần thiết
    - Mỗi một file chỉ có thể có 1 export default
    - Khi import dùng tên gì cũng được
- Name :
    - Khi export sẽ mất thời gian viết hơn xíu
    - Trong một file có thể import bao nhiêu hàm cũng được
    - Khi bundle có thể sử dụng Tree Shaking để loại bỏ hàm không dùng đến ra
    - Khi import phải chính xác tên gọi của hàm khi export 

## <span style="color: #3498db">241.Render Post List</span>
- Gọi API
    - Sử dụng IFFE + async await
    - Sử dụng try…cat
    - Truyền data nhận được cho hàm render
- Hàm render
    - Kiểm tra dữ liệu đầu vào có phải mảng hoặc mảng rỗng không
    - Lấy thẻ ul thông qua ID
    - Duyệt qua từng phần tử của mảng
        - Gọi tới hàm tạo li
        - Nhét li vào trong ul
- Hàm tạo li
    - Sử dụng try cat
    - Gọi tới template
    - Lấy ra toàn bộ note trong template và gán nó vào li
    - Lấy dữ liệu từng phần tử nhận được từ hàm render để gán cho nội dung li

## <span style="color: #3498db">242.dayjs - fallback image - truncate description</span>
- Xử lý ngày tháng post sử dụng thư viện dayjs
- Thêm xử lý khi ảnh gặp lỗi và không hiển thị được thì thay thể bằng ảnh khác
- Viết hàm rút gọn description

## <span style="color: #3498db">243.Pagination - bind click event</span>
- Xử lý URL khi có và không có params
- Tạo hàm chọn pagination, prev và next
- Tạo từng hàm để handle prev event và next event